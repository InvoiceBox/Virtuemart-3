# Описание платежного плагина ИнвойсБокс для CMS Joomla - VirtueMart 3+

Платёжный модуль для интеграции платёжной системы «ИнвойсБокс» и VirtueMart 3. Реализована поддержка платёжного API. Протестировано на CMS Joomla 3.7 и компоненте VirtueMart 3.2.4.

## Установка плагина

1. В админ-панели пройдите в "Менеджер расширений" —> "Установка". Добавьте файл "invoicebox_virtuemart.zip" и нажмите на кнопку "Загрузить и установить".

## Настройка модуля
1. Перейдите в компонент "Virtuemart" —> "Способы оплаты";
1. Добавьте новый метод оплаты "Invoicebox" и заполните поля. Нажмите «Сохранить»;
1. Зайти в раздел Администрирование -> Способы оплаты, добавить новый метод оплаты с процессором invoicebox;
1. Заполнить настройки на вкладке "Общее";
1. Перейдите во вкладку "Конфигурация" и заполните следующие поля:
    - "Идентификатор магазина"
    - "Региональный код магазина"
    - "Ключ безопасности магазина"
1. Выберите необходимые статусы заказа;
1. Нажмите на кнопку "Сохранить".

### Специфические настройки 

Тестовый режим - включите его для проведения тестовых платежей, при включении этого режима, вы пройдете все шаги в платежном терминале ИнвойсБокс, но деньги с вашей карты списаны не будут.

Принятая валюта  - выберите валюту рубли.

Страны - если этот параметр не важен не изменяйте его, если вы продаете на несколько стран, то возможно вам стоит ограничить показать платежного плагина, и выбрать только для "России".

Минимальная сумма - минимальная сумма заказа, при которой возможен платеж данным платежным плагином.

Максимальная сумма - максимальная сумма заказа, при которой возможен платеж данным платежным плагином.

Плата за транзакцию - дополнительный фиксированный сбор при выборе данного платежного метода.

Плата или возврат процента от общей суммы - дополнительный сбор в процентах при выборе данного платежного метода.

Налог - налоговые правила для данного платежного метода.

### Настройка панели ИнвойсБокс:

1. Для настройки панели управления ИнвойсБокс пройдите по url - https://login.invoicebox.ru/ ;
1. Авторизуйтесь и пройдите в раздел "Мои магазины". "Начало работы" -> "Настройки" -> "Мои магазины";
1. Пройдите по вкладку "Уведомления по протоколу" -> выберите "Тип уведомления" "Оплата/HTTP/Post (HTTP POST запрос с данными оплаты в переменных)"
1. В поле "URL уведомления" укажите:

    `<домен_сайта>/index.php?option=com_virtuemart&view=pluginresponse&task=pluginnotification`

1. Сохраните изменения.